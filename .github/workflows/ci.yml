# å·¥ä½œæµåç§°ï¼Œä¸è®¾ç½®çš„è¯é»˜è®¤å–é…ç½®æ–‡ä»¶å
name: Build and Deploy
# æŒ‡å®šè§¦å‘ workflow çš„æ¡ä»¶
# æŒ‡å®šè§¦å‘äº‹ä»¶æ—¶ï¼Œå¯ä»¥é™å®šåˆ†æ”¯æˆ–æ ‡ç­¾
# å½“å‰æ˜¯ åªæœ‰ masteråˆ†æ”¯ä¸Šè§¦å‘ push äº‹ä»¶æ—¶æ‰æ‰§è¡Œå·¥ä½œæµä»»åŠ¡
on: 
  push:
    branches:
      - master
# å·¥ä½œæµæ‰§è¡Œçš„ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡
jobs:
  # ä»»åŠ¡åç§°
  build-and-deploy:
    # ä»»åŠ¡è¿è¡Œçš„å®¹å™¨ç±»å‹ï¼ˆè™šæ‹Ÿæœºç¯å¢ƒï¼‰
    runs-on: ubuntu-latest
    # ä»»åŠ¡æ‰§è¡Œçš„æ­¥éª¤
    steps:
      # æ­¥éª¤åç§°
      - name: Checkout ğŸ›ï¸
        # ä½¿ç”¨çš„æ“ä½œ actionsï¼Œå¯ä»¥ä½¿ç”¨å…¬å…±ä»“åº“ï¼Œæœ¬åœ°ä»“åº“ï¼Œåˆ«äººçš„ä»“åº“çš„action
        # æ‹‰å–ä»£ç 
        uses: actions/checkout@vmaster

      - name: Build and Deploy
        # æ„å»ºå‘å¸ƒ Github pages
        uses: JamesIves/github-pages-deploy-action@releases/v2
        # è¯¥æ­¥éª¤æ‰€éœ€çš„ç¯å¢ƒå˜é‡
        env:
          ACCESS_TOKEN: ${{ secrets.MY_TOKEN }}
          # åœ¨éƒ¨ç½²å‰è¦checkoutçš„åŸºæœ¬åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯master
          BASE_BRANCH: master # The branch the action should deploy from.
          # æŒ‡å®šéƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ gh-pages åˆ†æ”¯
          BRANCH: gh-pages # The branch the action should deploy to.
          # å­˜å‚¨åº“ä¸­è¦éƒ¨ç½²çš„æ–‡ä»¶å¤¹ã€‚
          # ä¹Ÿå°±æ˜¯ç¼–è¯‘åçš„é™æ€æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼ŒGithub Pagesä¼šè®¿é—®è¿™ä¸ªç›®å½•çš„index.htmlæ–‡ä»¶ï¼ˆVue CLIé»˜è®¤ç¼–è¯‘åˆ° dist ç›®å½•ï¼‰
          # å¦‚æœæ‚¨çš„æ„å»ºè„šæœ¬ç¼–è¯‘åˆ°åä¸ºbuildçš„ç›®å½•ä¸­ï¼Œåˆ™å°†å…¶æ”¾åœ¨æ­¤å¤„ã€‚ æ–‡ä»¶å¤¹è·¯å¾„ä¸èƒ½ä»¥/å¼€å¤´ã€‚ å¦‚æœæ‚¨å¸Œæœ›éƒ¨ç½²æ ¹ç›®å½•ï¼Œåˆ™å¯ä»¥æ”¾ç½®ä¸€ä¸ªã€‚
          FOLDER: dist # The folder the action should deploy.
          # å¦‚æœéœ€è¦æ„å»ºè„šæœ¬åœ¨æ¨é€ä¹‹å‰ç¼–è¯‘ä»£ç ï¼Œåˆ™å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ è„šæœ¬
          BUILD_SCRIPT: npm install && npm run build # The build script the action should run prior to deploying.